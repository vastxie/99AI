import{p as ee,w as ke,t,a as Ce,x as Ae,T as Se,U as ze}from"./index-a70ad6b3.js";import{_ as Ie}from"./titleBar.vue_vue_type_script_setup_true_lang-f6dc1198.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-1cfab100.js";import{u as Re}from"./useBasicLayout-8e07f8d7.js";import{C as fe,Q as Ne}from"./index-5ab11154.js";import{c as $e}from"./index-c94da121.js";import{d as te,S as M,U as D,a3 as a,r as o,V as Ue,W as l,M as e,a4 as n,X as r,c as U,e as $,j as H,l as T,f as Me,a5 as x,a8 as J}from"./vue-cf46d111.js";import{e as pe,q as me,r as Y,V as q,K as Pe,J as je,H as Z,z as Be,x as Fe,I as C,Q as Te,$ as qe,F as De,Z as Le,Y as K,U as X,a0 as Oe,a1 as he}from"./naive-ui-074da7ca.js";import"./vueuse-motion-d8fe070a.js";import"./_plugin-vue_export-helper-c27b6911.js";const Ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},We=a("path",{d:"M336 192h40a40 40 0 0 1 40 40v192a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V232a40 40 0 0 1 40-40h40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ee=a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M336 128l-80-80l-80 80"},null,-1),Ge=a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 321V48"},null,-1),Qe=[We,Ee,Ge],He=te({name:"ShareOutline",render:function(d,g){return M(),D("svg",Ve,Qe)}});function Je(){return ee({url:"/sales/mineAccount"})}function Ke(v){return ee({url:"/sales/mineRecords",data:v})}function Xe(v){return ee({url:"/sales/drawMoneyOrder",data:v})}function Ye(v){return ke({url:"/sales/appForMoney",data:v})}const Ze=""+new URL("badge-4a5770f0.png",import.meta.url).href,et=""+new URL("qianbao-77758046.png",import.meta.url).href,tt={class:"p-5 bg-white rounded dark:bg-slate-800"},at={class:"text-lg"},st={class:"pt-5"},nt=te({__name:"drawMoneyDialog",props:{visible:{type:Boolean}},emits:["close","submit"],setup(v,{emit:d}){const g=d,A=o(null),L=pe(),O=o([{label:t("share.alipay"),value:1},{label:t("share.wechat"),value:2}]),S=()=>({withdrawalAmount:null,withdrawalChannels:null,contactInformation:"",remark:""}),i=o(S()),f=o(!1),W={withdrawalAmount:[{required:!0,message:t("share.enterWithdrawalAmount")}],withdrawalChannels:[{required:!0,message:t("share.selectWithdrawalChannel")}],contactInformation:[{required:!0,message:t("share.enterContactInfo"),trigger:"blur"}],remark:[{required:!1,message:t("share.optionalRemark"),trigger:"blur"}]};function E(){i.value=S()}function P(){var p;(p=A.value)==null||p.validate(async u=>{if(!u)try{f.value=!0;const{withdrawalAmount:h,withdrawalChannels:V,contactInformation:I,remark:R}=i.value;(await Ye({withdrawalAmount:h,withdrawalChannels:V,contactInformation:I,remark:R})).success&&(L.success(t("share.withdrawalSuccess")),E(),g("submit"),g("close")),f.value=!1}catch{f.value=!1}})}function _(){}function G(){}function z(){g("close")}return(p,u)=>(M(),Ue(e(me),{show:p.visible,style:{width:"90%","max-width":"500px"},"on-after-enter":_,"on-after-leave":G},{default:l(()=>[a("div",tt,[a("span",at,n(e(t)("share.withdrawalApplicationForm")),1),a("div",{class:"absolute top-3 right-3 cursor-pointer z-30",onClick:z},[r(e(Y),{size:"20",color:"#0e7a0d"},{default:l(()=>[r(e(fe))]),_:1})]),a("div",st,[r(e(Fe),{ref_key:"formRef",ref:A,model:i.value,rules:W,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",style:{maxWidth:"640px"}},{default:l(()=>[r(e(q),{path:"withdrawalAmount",label:e(t)("share.withdrawalAmount")},{default:l(()=>[r(e(Pe),{value:i.value.withdrawalAmount,"onUpdate:value":u[0]||(u[0]=h=>i.value.withdrawalAmount=h),class:"w-full",clearable:"",precision:2,placeholder:e(t)("share.enterWithdrawalAmount")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(q),{path:"withdrawalChannels",label:e(t)("share.withdrawalChannel")},{default:l(()=>[r(e(je),{value:i.value.withdrawalChannels,"onUpdate:value":u[1]||(u[1]=h=>i.value.withdrawalChannels=h),placeholder:e(t)("share.selectWithdrawalChannel"),options:O.value},null,8,["value","placeholder","options"])]),_:1},8,["label"]),r(e(q),{path:"contactInformation",label:e(t)("share.contactInformation")},{default:l(()=>[r(e(Z),{value:i.value.contactInformation,"onUpdate:value":u[2]||(u[2]=h=>i.value.contactInformation=h),type:"textarea",rows:3,placeholder:e(t)("share.enterContactInfo")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(q),{path:"remark",label:e(t)("share.withdrawalRemark")},{default:l(()=>[r(e(Z),{value:i.value.remark,"onUpdate:value":u[3]||(u[3]=h=>i.value.remark=h),type:"textarea",rows:3,placeholder:e(t)("share.enterWithdrawalRemark")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(q),{class:"mt-3"},{default:l(()=>[r(e(Be),{block:"",type:"primary",disabled:f.value,loading:f.value,onClick:P},{default:l(()=>[U(n(e(t)("share.applyWithdrawal")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["show"]))}}),rt={class:"min-h-screen bg-white dark:bg-gray-900"},lt={class:"w-full bg-[#f78400] p-6 flex flex-col justify-between rounded shadow-xl relative"},ot={class:"absolute right-4 top-6 font-bold text-base opacity-60 text-[#eee] flex"},it=["src"],ct={class:"text-[#fff] font-bold text-xl"},dt={class:"leading-loose flex justify-between items-center py-5"},ut={class:"text-[#fff]"},ht={class:"font-bold text-4xl"},ft={class:"ml-3"},pt=["src"],mt={class:"flex justify-between text-[#fff] items-center"},vt={class:"flex flex-col"},gt={class:"flex items-end"},_t={class:"font-bold text-xl"},wt={class:"ml-2"},xt={class:"flex flex-col"},bt={class:"flex items-end"},yt={class:"font-bold text-xl"},kt={class:"ml-2"},Ct={class:"flex flex-col bg-[#fff] mt-5 rounded dark:bg-[#24272e] px-2"},At={class:"flex p-4 justify-between border-b dark:border-[#3a3a40]"},St={class:"flex item-center"},zt={class:"ml-2"},It={class:"text-base"},Rt={class:"flex p-4 justify-between border-b dark:border-[#3a3a40]"},Nt={class:"flex item-center"},$t={class:"ml-2"},Ut={class:"text-base"},Mt={class:"flex p-4 justify-between"},Pt={class:"flex item-center"},jt={class:"ml-2"},Bt={class:"text-base"},Ft={class:"flex flex-col bg-[#fff] mt-5 rounded dark:bg-[#24272e] px-2"},Tt={class:"py-6 px-4 flex justify-between items-center"},qt={class:"flex flex-col"},Dt={class:"text-base"},Lt={class:"text-[#999] text-xs mt-2"},Ot={class:"py-6 px-4 flex justify-between items-center"},Vt={class:"flex flex-col"},Wt={class:"text-base"},Et={class:"text-[#999] text-xs mt-2"},Gt={class:"py-6 px-4 flex justify-between items-center"},Qt={class:"flex flex-col"},Ht={class:"text-base"},Jt={class:"text-[#999] text-xs mt-2"},Kt={class:"bg-[#fff] dark:bg-[#24272e] p-5 rounded flex"},Xt={class:"w-full flex"},Yt={class:"mt-5 bg-[#fff] p-5 dark:bg-[#24272e]"},Zt={class:"pt-5"},ea={class:"pt-5"},ta={class:"pt-5"},aa={class:"p-4 bg-white rounded dark:bg-slate-800"},sa={class:"flex text-base mb-[20px] bg-currentflex items-center"},na={class:"ml-[8px] mt-2"},ra={class:"w-full flex mb-5 px-6"},la={class:"flex justify-center items-center"},oa={class:"flex flex-col p-5 justify-center"},ia={class:"text-center"},ca={class:"text-center"},ba=te({__name:"index",setup(v){const d=o({distributionBalance:0,drawMoneyIn:0,id:0,inviteCount:0,inviteLinkCount:0,orderCount:0,performanceRatio:0,salesOutletName:"",totalAmount:0,withdrawalAmount:0}),g=o(!1),A=o(!1),L=o([]),O=o([]),S=Ce(),i=$(()=>S.globalConfig),f=$(()=>{var s,c;return(s=i.value)!=null&&s.salesBaseRatio?Number((c=i.value)==null?void 0:c.salesBaseRatio):10}),W=$(()=>{var s,c;return(s=i.value)!=null&&s.salesSeniorRatio?Number((c=i.value)==null?void 0:c.salesSeniorRatio):10}),E=o(null),P=o("rec"),_=$(()=>S.userInfo.inviteCode),G=$(()=>{let s=`${window.location.protocol}//${window.location.hostname}`;return window.location.port&&(s+=`:${window.location.port}`),s}),z=$(()=>_.value?`${G.value}?inVitecode=${_.value}`:"**************"),p=pe(),u=o(null);Ae(),o([]);const h=o(null);o({pageSize:23});const V=o([]),I=o(!1),R=o(!1),j=o(!1),b=H({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50],onChange:s=>{b.page=s,N()},onUpdatePageSize:s=>{b.pageSize=s,b.page=1,N()}}),y=H({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50],onChange:s=>{y.page=s,N()},onUpdatePageSize:s=>{y.pageSize=s,y.page=1,N()}}),k=H({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50],onChange:s=>{k.page=s,Q()},onUpdatePageSize:s=>{k.pageSize=s,k.page=1,Q()}}),ve=o([{title:t("share.orderAmount"),align:"center",orderPrice:"address",render(s){return`￥${s.orderPrice}元`}},{align:"center",title:t("share.productType"),key:"tags",render(s){return t("share.purchasePackage")}},{align:"center",title:t("share.status"),key:"status",render(s){return T(C,{type:"success",size:"small",round:!0},()=>t("share.accounted"))}},{align:"center",title:t("share.commissionRate"),key:"commissionAmount",render(s){return`${s.commissionPercentage}%`}},{align:"center",title:t("share.commission"),key:"commissionAmount",render(s){return`￥${s.commissionAmount}元`}},{align:"center",title:t("share.orderTime"),key:"createdAt"}]);function ge(){P.value="drawMoney",ae(),se()}async function _e(){const s=await ze();if(!s.data)return p.error(s.message);p.success(t("share.generateInviteCodeSuccess")),S.getUserInfo()}function we(){A.value=!0}async function ae(){const s=await Je();d.value=s.data}function xe(s){s==="drawMoney"&&se(),s==="rec"&&N(),s==="register"&&Q()}async function N(){try{I.value=!0;const s=await Ke({page:b.page,size:b.pageSize});L.value=s.data.rows,b.itemCount=s.data.count,I.value=!1}catch{I.value=!1}}async function se(){try{R.value=!0;const s=await Xe({page:y.page,size:y.pageSize});y.itemCount=s.data.count,O.value=s.data.rows,R.value=!1}catch{R.value=!1}}const be=o([{title:t("share.withdrawalTime"),key:"createdAt",align:"center"},{title:t("share.withdrawalAmount"),key:"withdrawalAmount",align:"center"},{title:t("share.withdrawalChannel"),key:"withdrawalChannels",align:"center",render(s){return T(C,{type:s.withdrawalChannels===1?"info":"success",size:"small",round:!0},()=>s.withdrawalChannels===1?t("share.alipay"):t("share.wechat"))}},{title:t("share.withdrawalStatus"),key:"paymentStatus",render(s){return T(C,{type:s.paymentStatus===1?"success":s.paymentStatus===-1?"error":"info",size:"small",round:!0},()=>s.paymentStatus===1?t("share.paid"):s.paymentStatus===-1?t("share.rejected"):t("share.inReview"))}},{title:t("share.withdrawalRemarks"),key:"contactInformation",align:"center",render(s){return` ${(s==null?void 0:s.contactInformation)||"---"} `}},{title:t("share.auditor"),key:"auditUserId",align:"center",render(s){return` ${(s==null?void 0:s.auditUserName)||"---"} `}}]),ye=o([{title:t("share.avatar"),align:"center",key:"avatar",render(s){return T(Te,{src:s.avatar,round:!0,size:38,border:!0})}},{align:"center",title:t("share.username"),key:"username"},{align:"center",title:t("share.email"),key:"email"},{title:t("share.inviteeStatus"),align:"center",key:"status",render(s){return T(C,{type:s.status===1?"success":"error",size:"small",round:!0},()=>s.status===1?t("share.registered"):t("share.pendingActivation"))}},{title:t("share.registrationTime"),align:"center",key:"createdAt"},{title:t("share.lastLogin"),align:"center",key:"updatedAt"}]),{isMobile:w}=Re();async function Q(){try{j.value=!0;const s=await Se({page:k.page,size:k.pageSize});V.value=s.data.rows,k.itemCount=s.data.count,j.value=!1}catch{j.value=!1}}function ne(){if(!_.value)return p.error(t("share.requestInviteCodeFirst"));$e({text:z.value}),p.success(t("share.linkCopiedSuccess"));const s=u.value,c=document.createRange(),B=window.getSelection();c.selectNodeContents(s),B.removeAllRanges(),B.addRange(c)}return Me(()=>{var s;(s=h.value)==null||s.play(),ae(),N()}),(s,c)=>{var B,re,le,oe,ie,ce,de,ue;return M(),D("div",rt,[r(e(Ie),{class:x([e(w)?"px-3":"px-14"]),title:e(t)("share.title"),des:e(t)("share.description")},null,8,["class","title","des"]),a("div",{class:x(["flex-1 flex-wrap py-5 flex justify-between",[e(w)?"px-3":"px-20"]])},[a("div",{class:x(["px-[12px] min-w-[350px]",[e(w)?"w-full":"w-1/3"]])},[a("div",lt,[a("div",ot,[U(n(((B=d.value)==null?void 0:B.salesOutletName)||e(t)("share.defaultSalesOutletName"))+" ",1),a("img",{src:e(Ze),class:"ml-2 w-6 h-6 opacity-50"},null,8,it)]),a("h2",ct,n(e(t)("share.myReferrals")),1),a("div",dt,[a("div",ut,[a("span",ht,[r(e(qe),{ref_key:"numberAnimationInstRef",ref:h,from:0,to:Number((re=d.value)==null?void 0:re.totalAmount),active:!0,precision:2},null,8,["to"])]),a("span",ft,n(e(t)("share.currencyUnit")),1)]),a("img",{src:e(et),class:"w-20 opacity-10",alt:""},null,8,pt)]),a("div",mt,[a("div",vt,[a("div",gt,[a("span",_t,n(((le=d.value)==null?void 0:le.distributionBalance)||0),1),a("span",wt,n(e(t)("share.currencyUnit")),1)]),a("div",null,n(e(t)("share.remainingAmount")),1)]),a("div",xt,[a("div",bt,[a("span",yt,n(((oe=d.value)==null?void 0:oe.drawMoneyIn)||0),1),a("span",kt,n(e(t)("share.currencyUnit")),1)]),a("div",null,n(e(t)("share.withdrawingAmount")),1)]),a("div",null,[r(e(De),{placement:"top",trigger:"hover",delay:((ie=d.value)==null?void 0:ie.distributionBalance)>10?800:200},{trigger:l(()=>{var m;return[a("div",{class:x(["btn",[((m=d.value)==null?void 0:m.distributionBalance)<Number(f.value)?"disabled":""]]),onClick:c[0]||(c[0]=da=>g.value=!0)},n(e(t)("share.withdrawNow")),3)]}),default:l(()=>{var m;return[a("span",null,n(e(t)("share.minimumWithdrawalPrefix"))+" "+n(Number((m=i.value)==null?void 0:m.salesAllowDrawMoney)||10)+" "+n(e(t)("share.minimumWithdrawalSuffix")),1)]}),_:1},8,["delay"])])])]),a("div",Ct,[a("div",At,[a("div",St,[r(e(F),{class:"text-lg",icon:"icon-park-outline:order"}),a("span",zt,n(e(t)("share.purchaseOrderCount")),1)]),a("b",It,n(((ce=d.value)==null?void 0:ce.orderCount)||0),1)]),a("div",Rt,[a("div",Nt,[r(e(F),{class:"text-lg",icon:"ep:link"}),a("span",$t,n(e(t)("share.promotionLinkVisits")),1)]),a("b",Ut,n(((de=d.value)==null?void 0:de.inviteLinkCount)||0),1)]),a("div",Mt,[a("div",Pt,[r(e(F),{class:"text-lg",icon:"ph:user"}),a("span",jt,n(e(t)("share.registeredUsers")),1)]),a("b",Bt,n(((ue=d.value)==null?void 0:ue.inviteCount)||0),1)])]),a("div",Ft,[a("div",Tt,[a("div",qt,[a("h3",Dt,n(e(t)("share.referralEarnings")),1),a("div",Lt,n(e(t)("share.referralEarningsDescription")),1)]),r(e(C),{round:"",bordered:!1,type:"success",size:"small"},{default:l(()=>[U(n(e(t)("share.percentage"))+n(f.value)+"% ",1)]),_:1})]),a("div",Ot,[a("div",Vt,[a("h3",Wt,n(e(t)("share.applyForAdvancedAgent")),1),a("div",Et,n(e(t)("share.contactAdminForAdvancedAgent")),1)]),r(e(C),{round:"",bordered:!1,type:"success",size:"small"},{default:l(()=>[U(n(e(t)("share.percentage"))+n(W.value)+"% ",1)]),_:1})]),a("div",Gt,[a("div",Qt,[a("h3",Ht,n(e(t)("share.joinAsPartner")),1),a("div",Jt,n(e(t)("share.partnerDescription")),1)]),r(e(C),{round:"",bordered:!1,type:"error",size:"small"},{default:l(()=>[U(n(e(t)("share.winTogether")),1)]),_:1})])])],2),a("div",{class:x(["px-[12px]",[e(w)?"w-full":"w-2/3"]])},[a("div",Kt,[a("div",Xt,[a("div",{class:x(["border border-[ced4da] dark:border-[#3a3a40] text-sm py-1 rounded-l-md flex items-center",[e(w)?"px-1":"px-3"]])},n(e(t)("share.referralLink")),3),a("div",{ref_key:"selectable",ref:u,class:"bg-[#fafafa] dark:bg-[#2F2E34] flex-1 flex items-center dark:border-[#ffffff17] border-b border-t pl-4 max-w-[500px] select-text overflow-x-hidden whitespace-nowrap"},n(z.value),513),_.value?J("",!0):(M(),D("div",{key:0,class:x([[e(w)?"px-2":"px-5"],"cursor-pointer hover:text-[#5A91FC] transition-all border dark:border-[#ffffff17] flex items-center mr-[-1px] select-none"]),onClick:_e},n(e(t)("share.apply")),3)),_.value?(M(),D("div",{key:1,class:x([[e(w)?"px-2":"px-5"],"cursor-pointer hover:text-[#5A91FC] transition-all border dark:border-[#ffffff17] flex items-center mr-[-1px]"])},[r(e(F),{class:"text-lg",icon:"fluent:document-copy-48-regular",onClick:ne})],2)):J("",!0),!e(w)&&_.value?(M(),D("div",{key:2,class:"cursor-pointer hover:text-[#5A91FC] transition-all border dark:border-[#ffffff17] flex items-center px-5 bg-currentrounded-r-md",onClick:we},[r(e(F),{class:"text-lg",icon:"la:qrcode"})])):J("",!0)])]),a("div",Yt,[r(e(Le),{ref_key:"tabRef",ref:E,value:P.value,"onUpdate:value":[c[1]||(c[1]=m=>P.value=m),xe],"bar-width":338,animated:"","justify-content":"space-evenly",type:"line"},{default:l(()=>[r(e(K),{name:"rec",tab:e(t)("share.referralRecordsTab")},{default:l(()=>[a("div",Zt,[r(e(X),{"min-width":200,loading:I.value,remote:!0,"pagination-behavior-on-filter":"first",class:"min-h-[350px]",columns:ve.value,data:L.value,pagination:b,"scroll-x":700},null,8,["loading","columns","data","pagination"])])]),_:1},8,["tab"]),r(e(K),{name:"drawMoney",tab:e(t)("share.withdrawalRecordsTab")},{default:l(()=>[a("div",ea,[r(e(X),{loading:R.value,remote:!0,"pagination-behavior-on-filter":"first",class:"min-h-[350px]",columns:be.value,data:O.value,pagination:y,"scroll-x":500},null,8,["loading","columns","data","pagination"])])]),_:1},8,["tab"]),r(e(K),{name:"register",tab:e(t)("share.registeredUsersTab")},{default:l(()=>[a("div",ta,[r(e(X),{loading:j.value,remote:!0,"pagination-behavior-on-filter":"first",class:"min-h-[350px]",columns:ye.value,data:V.value,pagination:k,"scroll-x":500},null,8,["loading","columns","data","pagination"])])]),_:1},8,["tab"])]),_:1},8,["value"])]),r(nt,{visible:g.value,onClose:c[2]||(c[2]=m=>g.value=!1),onSubmit:ge},null,8,["visible"])],2)],2),r(e(me),{show:A.value,style:{width:"90%","max-width":"420px"}},{default:l(()=>[a("div",aa,[a("div",{class:"flex justify-between",onClick:c[3]||(c[3]=m=>A.value=!1)},[a("div",sa,[r(e(Y),{size:"22",color:"#0e7a0d"},{default:l(()=>[r(e(He))]),_:1}),a("span",na,n(e(t)("share.inviteFriends")),1)]),r(e(Y),{size:"20",color:"#0e7a0d",class:"cursor-pointer"},{default:l(()=>[r(e(fe))]),_:1})]),a("div",ra,[r(e(Oe),null,{default:l(()=>[r(e(he),{size:"small"},{default:l(()=>[U(n(e(t)("share.inviteLink")),1)]),_:1}),r(e(Z),{size:"small",style:{flex:1},value:z.value},null,8,["value"]),r(e(he),{size:"small",onClick:ne},{default:l(()=>[a("div",null,n(e(t)("share.copy")),1)]),_:1})]),_:1})]),a("div",la,[r(Ne,{value:z.value,size:240},null,8,["value"])]),a("div",oa,[a("span",ia,n(e(t)("share.inviteBenefits1")),1),a("span",ca,n(e(t)("share.inviteBenefits2Prefix"))+" "+n(f.value||10)+" "+n(e(t)("share.inviteBenefits2Suffix")),1)])])]),_:1},8,["show"])])}}});export{ba as default};
