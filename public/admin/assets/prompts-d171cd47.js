
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as le}from"./index-fd8a5577.js";import{A as x}from"./mj-bb9f2011.js";import{d as ae,r as n,Q as j,B as z,x as oe,h as o,R as se,o as y,c as F,e,f as l,l as m,w as O,b as _,I as q,a as V,t as b,S as re,U as ne,V as ie,E as R,X as ue,q as A}from"./index-e656eb90.js";const de={class:"overflow-y-scroll w-full whitespace-nowrap"},pe=V("div",{style:{width:"250px"}}," 关闭当前提示词、用户端将不再展示！ ",-1),ce=V("div",{style:{width:"250px"}}," 携带左侧参数将会对提示词的参数复写、不携带则以自定义提示词中的指令参数为准！ ",-1),me={class:"flex justify-end mr-5"},_e=ae({__name:"prompts",setup(fe){n(),n(),n(0);const v=n(!1),I=n(!1);n(!1);const h=n(),i=n(0),r=j({isCarryParams:!0,status:!0,title:"",order:100,prompt:"",aspect:"16:9"}),L=n([{aspect:"1:1"},{aspect:"4:3"},{aspect:"3:4"},{aspect:"16:9"},{aspect:"9:16"}]),M=j({isCarryParams:[{required:!0,message:"请选择你是否需要携带参数",trigger:"change"}],status:[{required:!0,message:"请选择提示词开启状态",trigger:"change"}],title:[{required:!0,message:"请填写您的提示词信息",trigger:"blur"}],order:[{required:!0,message:"请填写您的排序id 越大越靠前",trigger:"blur"}],prompt:[{required:!0,message:"请填写提示词详细内容",trigger:"change"}],aspect:[{required:!0,message:"请选择图片比例",trigger:"change"}]});function Q(s){i.value=0,s==null||s.resetFields()}const u=n(!1),T=z(()=>i.value?"更新提示词":"新增提示词"),J=z(()=>i.value?"确认更新":"确认新增"),U=n([]);async function C(){try{v.value=!0;const s=await x.queryPrompts();v.value=!1,U.value=s.data}catch{v.value=!1}}async function X(s){const{id:a}=s;await x.delPrompt({id:a}),R({type:"success",message:"操作完成！"}),C()}function G(s){i.value=s.id;const{status:a,title:d,prompt:P,order:g,isCarryParams:p,aspect:w}=s;ue(()=>{Object.assign(r,{status:a,title:d,prompt:P,order:g,isCarryParams:p,aspect:w})}),u.value=!0}async function H(s){s==null||s.validate(async a=>{if(a){const d=JSON.parse(JSON.stringify(r));delete d.id,i.value&&(d.id=i.value),await x.setPrompt(d),R({type:"success",message:"操作成功！"}),i.value=0,u.value=!1,C()}})}return oe(()=>{C()}),(s,a)=>{const d=o("el-alert"),P=o("Plus"),g=o("el-icon"),p=o("el-button"),w=le,c=o("el-table-column"),D=o("el-tag"),K=o("el-popconfirm"),W=o("el-table"),B=o("el-switch"),$=o("QuestionFilled"),N=o("el-tooltip"),f=o("el-form-item"),k=o("el-input"),Y=o("el-option"),Z=o("el-select"),E=o("el-form"),ee=o("el-dialog"),S=se("loading");return y(),F("div",null,[e(w,{class:"header"},{default:l(()=>[e(d,{"show-icon":"",title:"提示词说明",description:"此处的提示词将会在用户端的midjoney绘画中展示出来、用户点击你给与的预设将直接将提示词写入输入框中！",type:"success"}),e(p,{type:"success",class:"ml-3",size:"large",onClick:a[0]||(a[0]=t=>u.value=!0)},{default:l(()=>[m(" 添加提示词 "),e(g,{class:"ml-3"},{default:l(()=>[e(P)]),_:1})]),_:1})]),_:1}),e(w,{style:{width:"100%"}},{default:l(()=>[O((y(),q(W,{border:"",data:_(U),style:{width:"100%"},size:"large"},{default:l(()=>[e(c,{prop:"title",label:"提示词名称",width:"180"}),e(c,{prop:"aspect",label:"图片比例",width:"180"}),e(c,{prop:"prompt",label:"提示词内容"},{default:l(t=>[V("div",de,b(t.row.prompt),1)]),_:1}),e(c,{prop:"status",align:"center",label:"提示词状态",width:"110"},{default:l(t=>[e(D,{type:t.row.status?"success":"danger"},{default:l(()=>[m(b(t.row.status?"开启中":"已关闭"),1)]),_:2},1032,["type"])]),_:1}),e(c,{prop:"isCarryParams",align:"center",label:"携带用户的参数",width:"150"},{default:l(t=>[e(D,{type:t.row.isCarryParams?"success":"warning"},{default:l(()=>[m(b(t.row.isCarryParams?"携带":"不携带"),1)]),_:2},1032,["type"])]),_:1}),e(c,{prop:"order",align:"center",label:"排序ID",width:"90"}),e(c,{fixed:"right",label:"操作",align:"center",width:"180"},{default:l(t=>[e(p,{link:"",type:"primary",size:"small",onClick:te=>G(t.row)},{default:l(()=>[m(" 变更 ")]),_:2},1032,["onClick"]),e(K,{title:"确认删除此提示词么?",width:"180","icon-color":"red",onConfirm:te=>X(t.row)},{reference:l(()=>[e(p,{link:"",type:"danger",size:"small"},{default:l(()=>[m(" 删除秘钥 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[S,_(v)]])]),_:1}),e(ee,{modelValue:_(u),"onUpdate:modelValue":a[9]||(a[9]=t=>ie(u)?u.value=t:null),"close-on-click-modal":!1,title:T.value,width:"770",onClose:a[10]||(a[10]=t=>Q(_(h)))},{footer:l(()=>[V("span",me,[e(p,{onClick:a[7]||(a[7]=t=>u.value=!1)},{default:l(()=>[m("取消")]),_:1}),e(p,{type:"primary",onClick:a[8]||(a[8]=t=>H(_(h)))},{default:l(()=>[m(b(J.value),1)]),_:1})])]),default:l(()=>[O((y(),q(E,{ref_key:"formPackageRef",ref:h,"label-position":"right","label-width":"120px",model:r,rules:M},{default:l(()=>[e(f,{label:"启用状态",prop:"status"},{default:l(()=>[e(B,{modelValue:r.status,"onUpdate:modelValue":a[1]||(a[1]=t=>r.status=t)},null,8,["modelValue"]),e(N,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[pe]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e($)]),_:1})]),_:1})]),_:1}),e(f,{label:"携带左侧参数",prop:"isCarryParams"},{default:l(()=>[e(B,{modelValue:r.isCarryParams,"onUpdate:modelValue":a[2]||(a[2]=t=>r.isCarryParams=t)},null,8,["modelValue"]),e(N,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ce]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e($)]),_:1})]),_:1})]),_:1}),e(f,{label:"排序Order",prop:"order"},{default:l(()=>[e(k,{modelValue:r.order,"onUpdate:modelValue":a[3]||(a[3]=t=>r.order=t),placeholder:"排序id越大越靠前"},null,8,["modelValue"])]),_:1}),e(f,{label:"提示词名称",prop:"title"},{default:l(()=>[e(k,{modelValue:r.title,"onUpdate:modelValue":a[4]||(a[4]=t=>r.title=t),placeholder:"请填写提示词名称（用户看到的名称）"},null,8,["modelValue"])]),_:1}),e(f,{label:"图片比例",prop:"aspect"},{default:l(()=>[e(Z,{modelValue:r.aspect,"onUpdate:modelValue":a[5]||(a[5]=t=>r.aspect=t),placeholder:"请选择图片比例",style:{width:"100%"}},{default:l(()=>[(y(!0),F(re,null,ne(_(L),t=>(y(),q(Y,{key:t.aspect,label:t.aspect,value:t.aspect},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"提示词内容",prop:"proxyUrl"},{default:l(()=>[e(k,{type:"textarea",rows:4,modelValue:r.prompt,"onUpdate:modelValue":a[6]||(a[6]=t=>r.prompt=t),placeholder:"请填写提示词详细内容！"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[S,_(I)]])]),_:1},8,["modelValue","title"])])}}});typeof A=="function"&&A(_e);export{_e as default};
